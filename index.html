<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Teaching with {tidymodels}</title>
    <meta charset="utf-8" />
    <meta name="author" content="Lisa Lendway, PhD" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link href="libs/pagedtable/css/pagedtable.css" rel="stylesheet" />
    <script src="libs/pagedtable/js/pagedtable.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Teaching with {tidymodels}
### Lisa Lendway, PhD
### Macalester College

---






# Welcome!

* Find slides here: https://llendway.github.io/jsm_bof_tidymodels/
* Let's do some brief introductions: Name, pronouns, where you teach (or work, if you don't teach), and why you wanted to be here today.

---

# What is {tidymodels}?

From the Tidymodels [website](https://www.tidymodels.org/), "The tidymodels framework is a collection of packages for modeling and machine learning using tidyverse principles."

Questions:

* Have you used {tidymodels}?  
* If so, in what context did you use it?

---


# Resources

* Tidymodels [website](https://www.tidymodels.org/). 
* Tidy Modeling with R [textbook](https://www.tmwr.org/) by Julia Silge and Max Kuhn.  
* Julia Silge's [blog](https://juliasilge.com/blog/) with many examples of using tidymodels from basic to complex.
* Mine Ã‡etinkaya-Rundel and Debbie Yuster's [slides](https://mine-cetinkaya-rundel.github.io/tidymodels-uscots-2021/tidy-up-models.html#1) from USCOTS 2021 - especially great for intro material.

---

# What we need

Here are the libraries we need (some tidyverse libraries are loaded with tidymodels so you may not need both).


```r
library(tidyverse)     # for data visualization and wrangling
library(lubridate)     # for date wrangling
library(tidymodels)    # for modeling ... the tidy way
theme_set(theme_minimal()) # my favorite default theme
```

---

# Simple linear regression

Let's start with a simple example using the `mpg` dataset from the tidyverse library. I want to compare what I do now (on the left) with what I would need to do using tidymodels. (We can jump back to R Markdown to get a better view.)

.pull-left[

```r
slr &lt;- lm(hwy ~ displ, data=mpg) 

slr %&gt;% 
  tidy()
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"35.697651","3":"0.7203676","4":"49.55477","5":"2.123519e-125"},{"1":"displ","2":"-3.530589","3":"0.1945137","4":"-18.15085","5":"2.038974e-46"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;

]

.pull-right[

```r
slr_tm &lt;-
  # Define a linear regression model
  linear_reg() %&gt;% 
  # Set the engine to "lm" (lm() function is used to fit model)
  set_engine("lm") %&gt;% 
  # fit model
  fit(hwy ~ displ, data=mpg)

slr_tm %&gt;% 
  tidy()
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"35.697651","3":"0.7203676","4":"49.55477","5":"2.123519e-125"},{"1":"displ","2":"-3.530589","3":"0.1945137","4":"-18.15085","5":"2.038974e-46"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;

]

---

# Linear regression - prediction 

And we can do prediction. We can add `data = mpg` to `augment()` to return all original variables. And we can add, eg, `newdata = tibble(displ = c(3, 3.5))` for a couple observations.

.pull-left[


```r
slr %&gt;% 
  augment()
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["hwy"],"name":[1],"type":["int"],"align":["right"]},{"label":["displ"],"name":[2],"type":["dbl"],"align":["right"]},{"label":[".fitted"],"name":[3],"type":["dbl"],"align":["right"]},{"label":[".resid"],"name":[4],"type":["dbl"],"align":["right"]},{"label":[".hat"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".sigma"],"name":[6],"type":["dbl"],"align":["right"]},{"label":[".cooksd"],"name":[7],"type":["dbl"],"align":["right"]},{"label":[".std.resid"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"29","2":"1.8","3":"29.34259","4":"-0.34259120","5":"0.011459924","6":"3.844212","7":"4.676940e-05","8":"-0.08982602"},{"1":"29","2":"1.8","3":"29.34259","4":"-0.34259120","5":"0.011459924","6":"3.844212","7":"4.676940e-05","8":"-0.08982602"},{"1":"31","2":"2.0","3":"28.63647","4":"2.36352656","5":"0.009843324","6":"3.841101","7":"1.905773e-03","8":"0.61920098"},{"1":"30","2":"2.0","3":"28.63647","4":"1.36352656","5":"0.009843324","6":"3.843222","7":"6.342747e-04","8":"0.35721917"},{"1":"26","2":"2.8","3":"25.81200","4":"0.18799761","5":"0.005433937","6":"3.844259","7":"6.597330e-06","8":"0.04914265"},{"1":"26","2":"2.8","3":"25.81200","4":"0.18799761","5":"0.005433937","6":"3.844259","7":"6.597330e-06","8":"0.04914265"},{"1":"27","2":"3.1","3":"24.75283","4":"2.24717425","5":"0.004628934","6":"3.841421","7":"8.016793e-04","8":"0.58717473"},{"1":"26","2":"1.8","3":"29.34259","4":"-3.34259120","5":"0.011459924","6":"3.837910","7":"4.452213e-03","8":"-0.87641386"},{"1":"25","2":"1.8","3":"29.34259","4":"-4.34259120","5":"0.011459924","6":"3.833523","7":"7.514625e-03","8":"-1.13860980"},{"1":"28","2":"2.0","3":"28.63647","4":"-0.63647344","5":"0.009843324","6":"3.844049","7":"1.382009e-04","8":"-0.16674447"},{"1":"27","2":"2.0","3":"28.63647","4":"-1.63647344","5":"0.009843324","6":"3.842756","7":"9.136253e-04","8":"-0.42872629"},{"1":"25","2":"2.8","3":"25.81200","4":"-0.81200239","5":"0.005433937","6":"3.843906","7":"1.230774e-04","8":"-0.21225777"},{"1":"25","2":"2.8","3":"25.81200","4":"-0.81200239","5":"0.005433937","6":"3.843906","7":"1.230774e-04","8":"-0.21225777"},{"1":"25","2":"3.1","3":"24.75283","4":"0.24717425","5":"0.004628934","6":"3.844244","7":"9.699148e-06","8":"0.06458532"},{"1":"25","2":"3.1","3":"24.75283","4":"0.24717425","5":"0.004628934","6":"3.844244","7":"9.699148e-06","8":"0.06458532"},{"1":"24","2":"2.8","3":"25.81200","4":"-1.81200239","5":"0.005433937","6":"3.842420","7":"6.128880e-04","8":"-0.47365820"},{"1":"25","2":"3.1","3":"24.75283","4":"0.24717425","5":"0.004628934","6":"3.844244","7":"9.699148e-06","8":"0.06458532"},{"1":"23","2":"4.2","3":"20.86918","4":"2.13082193","5":"0.005637001","6":"3.841707","7":"8.795666e-04","8":"0.55705463"},{"1":"20","2":"5.3","3":"16.98553","4":"3.01446962","5":"0.012867526","6":"3.839092","7":"4.077390e-03","8":"0.79094503"},{"1":"15","2":"5.3","3":"16.98553","4":"-1.98553038","5":"0.012867526","6":"3.842030","7":"1.768941e-03","8":"-0.52096905"},{"1":"20","2":"5.3","3":"16.98553","4":"3.01446962","5":"0.012867526","6":"3.839092","7":"4.077390e-03","8":"0.79094503"},{"1":"17","2":"5.7","3":"15.57329","4":"1.42670514","5":"0.017039566","6":"3.843113","7":"1.219751e-03","8":"0.37513650"},{"1":"17","2":"6.0","3":"14.51412","4":"2.48588179","5":"0.020708561","6":"3.840724","7":"4.534226e-03","8":"0.65485870"},{"1":"26","2":"5.7","3":"15.57329","4":"10.42670514","5":"0.017039566","6":"3.781493","7":"6.514737e-02","8":"2.74158796"},{"1":"23","2":"5.7","3":"15.57329","4":"7.42670514","5":"0.017039566","6":"3.812554","7":"3.305179e-02","8":"1.95277080"},{"1":"26","2":"6.2","3":"13.80800","4":"12.19199955","5":"0.023411684","6":"3.757602","7":"1.239869e-01","8":"3.21619436"},{"1":"25","2":"6.2","3":"13.80800","4":"11.19199955","5":"0.023411684","6":"3.771369","7":"1.044819e-01","8":"2.95239888"},{"1":"24","2":"7.0","3":"10.98353","4":"13.01647059","5":"0.036281188","6":"3.743983","7":"2.248969e-01","8":"3.45653679"},{"1":"19","2":"5.3","3":"16.98553","4":"2.01446962","5":"0.012867526","6":"3.841964","7":"1.820882e-03","8":"0.52856221"},{"1":"14","2":"5.3","3":"16.98553","4":"-2.98553038","5":"0.012867526","6":"3.839192","7":"3.999479e-03","8":"-0.78335187"},{"1":"15","2":"5.7","3":"15.57329","4":"-0.57329486","5":"0.017039566","6":"3.844091","7":"1.969513e-04","8":"-0.15074161"},{"1":"17","2":"6.5","3":"12.74882","4":"4.25117619","5":"0.027852059","6":"3.833797","7":"1.809785e-02","8":"1.12399928"},{"1":"27","2":"2.4","3":"27.22424","4":"-0.22423792","5":"0.007227228","6":"3.844250","7":"1.252871e-05","8":"-0.05866880"},{"1":"30","2":"2.4","3":"27.22424","4":"2.77576208","5":"0.007227228","6":"3.839907","7":"1.919786e-03","8":"0.72624043"},{"1":"26","2":"3.1","3":"24.75283","4":"1.24717425","5":"0.004628934","6":"3.843399","7":"2.469343e-04","8":"0.32588002"},{"1":"29","2":"3.5","3":"23.34059","4":"5.65940977","5":"0.004275550","6":"3.826125","7":"4.693233e-03","8":"1.47851136"},{"1":"26","2":"3.6","3":"22.98753","4":"3.01246865","5":"0.004315767","6":"3.839144","7":"1.342382e-03","8":"0.78701830"},{"1":"24","2":"2.4","3":"27.22424","4":"-3.22423792","5":"0.007227228","6":"3.838379","7":"2.590255e-03","8":"-0.84357803"},{"1":"24","2":"3.0","3":"25.10588","4":"-1.10588463","5":"0.004845843","6":"3.843587","7":"2.033408e-04","8":"-0.28899329"},{"1":"22","2":"3.3","3":"24.04671","4":"-2.04670799","5":"0.004349391","6":"3.841909","7":"6.245145e-04","8":"-0.53471887"},{"1":"22","2":"3.3","3":"24.04671","4":"-2.04670799","5":"0.004349391","6":"3.841909","7":"6.245145e-04","8":"-0.53471887"},{"1":"24","2":"3.3","3":"24.04671","4":"-0.04670799","5":"0.004349391","6":"3.844278","7":"3.252469e-07","8":"-0.01220284"},{"1":"24","2":"3.3","3":"24.04671","4":"-0.04670799","5":"0.004349391","6":"3.844278","7":"3.252469e-07","8":"-0.01220284"},{"1":"17","2":"3.3","3":"24.04671","4":"-7.04670799","5":"0.004349391","6":"3.816095","7":"7.402924e-03","8":"-1.84100897"},{"1":"22","2":"3.8","3":"22.28141","4":"-0.28141359","5":"0.004550477","6":"3.844234","7":"1.235733e-05","8":"-0.07352898"},{"1":"21","2":"3.8","3":"22.28141","4":"-1.28141359","5":"0.004550477","6":"3.843350","7":"2.562202e-04","8":"-0.33481339"},{"1":"23","2":"3.8","3":"22.28141","4":"0.71858641","5":"0.004550477","6":"3.843987","7":"8.057358e-05","8":"0.18775542"},{"1":"23","2":"4.0","3":"21.57530","4":"1.42470417","5":"0.004990888","6":"3.843130","7":"3.476877e-04","8":"0.37233536"},{"1":"19","2":"3.7","3":"22.63447","4":"-3.63447247","5":"0.004407409","6":"3.836801","7":"1.995809e-03","8":"-0.94956274"},{"1":"18","2":"3.7","3":"22.63447","4":"-4.63447247","5":"0.004407409","6":"3.832113","7":"3.245166e-03","8":"-1.21082837"},{"1":"17","2":"3.9","3":"21.92835","4":"-4.92835471","5":"0.004744970","6":"3.830513","7":"3.953528e-03","8":"-1.28782804"},{"1":"17","2":"3.9","3":"21.92835","4":"-4.92835471","5":"0.004744970","6":"3.830513","7":"3.953528e-03","8":"-1.28782804"},{"1":"19","2":"4.7","3":"19.10388","4":"-0.10388366","5":"0.008152224","6":"3.844273","7":"3.038763e-06","8":"-0.02719242"},{"1":"19","2":"4.7","3":"19.10388","4":"-0.10388366","5":"0.008152224","6":"3.844273","7":"3.038763e-06","8":"-0.02719242"},{"1":"12","2":"4.7","3":"19.10388","4":"-7.10388366","5":"0.008152224","6":"3.815524","7":"1.421000e-02","8":"-1.85950110"},{"1":"17","2":"5.2","3":"17.33859","4":"-0.33858926","5":"0.011953079","6":"3.844214","7":"4.769658e-05","8":"-0.08879888"},{"1":"15","2":"5.2","3":"17.33859","4":"-2.33858926","5":"0.011953079","6":"3.841161","7":"2.275353e-03","8":"-0.61332162"},{"1":"17","2":"3.9","3":"21.92835","4":"-4.92835471","5":"0.004744970","6":"3.830513","7":"3.953528e-03","8":"-1.28782804"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"12","2":"4.7","3":"19.10388","4":"-7.10388366","5":"0.008152224","6":"3.815524","7":"1.421000e-02","8":"-1.85950110"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"16","2":"5.2","3":"17.33859","4":"-1.33858926","5":"0.011953079","6":"3.843258","7":"7.454792e-04","8":"-0.35106025"},{"1":"18","2":"5.7","3":"15.57329","4":"2.42670514","5":"0.017039566","6":"3.840904","7":"3.528878e-03","8":"0.63807555"},{"1":"15","2":"5.9","3":"14.86718","4":"0.13282290","5":"0.019434137","6":"3.844269","7":"1.211641e-05","8":"0.03496695"},{"1":"16","2":"4.7","3":"19.10388","4":"-3.10388366","5":"0.008152224","6":"3.838806","7":"2.712771e-03","8":"-0.81246757"},{"1":"12","2":"4.7","3":"19.10388","4":"-7.10388366","5":"0.008152224","6":"3.815524","7":"1.421000e-02","8":"-1.85950110"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"16","2":"4.7","3":"19.10388","4":"-3.10388366","5":"0.008152224","6":"3.838806","7":"2.712771e-03","8":"-0.81246757"},{"1":"12","2":"4.7","3":"19.10388","4":"-7.10388366","5":"0.008152224","6":"3.815524","7":"1.421000e-02","8":"-1.85950110"},{"1":"15","2":"5.2","3":"17.33859","4":"-2.33858926","5":"0.011953079","6":"3.841161","7":"2.275353e-03","8":"-0.61332162"},{"1":"16","2":"5.2","3":"17.33859","4":"-1.33858926","5":"0.011953079","6":"3.843258","7":"7.454792e-04","8":"-0.35106025"},{"1":"17","2":"5.7","3":"15.57329","4":"1.42670514","5":"0.017039566","6":"3.843113","7":"1.219751e-03","8":"0.37513650"},{"1":"15","2":"5.9","3":"14.86718","4":"0.13282290","5":"0.019434137","6":"3.844269","7":"1.211641e-05","8":"0.03496695"},{"1":"17","2":"4.6","3":"19.45694","4":"-2.45694254","5":"0.007546329","6":"3.840853","7":"1.571526e-03","8":"-0.64292896"},{"1":"17","2":"5.4","3":"16.63247","4":"0.36752850","5":"0.013833398","6":"3.844202","7":"6.528698e-05","8":"0.09648038"},{"1":"18","2":"5.4","3":"16.63247","4":"1.36752850","5":"0.013833398","6":"3.843211","7":"9.038935e-04","8":"0.35899165"},{"1":"17","2":"4.0","3":"21.57530","4":"-4.57529583","5":"0.004990888","6":"3.832415","7":"3.585736e-03","8":"-1.19571798"},{"1":"19","2":"4.0","3":"21.57530","4":"-2.57529583","5":"0.004990888","6":"3.840524","7":"1.136042e-03","8":"-0.67303354"},{"1":"17","2":"4.0","3":"21.57530","4":"-4.57529583","5":"0.004990888","6":"3.832415","7":"3.585736e-03","8":"-1.19571798"},{"1":"19","2":"4.0","3":"21.57530","4":"-2.57529583","5":"0.004990888","6":"3.840524","7":"1.136042e-03","8":"-0.67303354"},{"1":"19","2":"4.6","3":"19.45694","4":"-0.45694254","5":"0.007546329","6":"3.844160","7":"5.435690e-05","8":"-0.11957202"},{"1":"17","2":"5.0","3":"18.04471","4":"-1.04470702","5":"0.010278461","6":"3.843658","7":"3.891413e-04","8":"-0.27375440"},{"1":"17","2":"4.2","3":"20.86918","4":"-3.86917807","5":"0.005637001","6":"3.835793","7":"2.900093e-03","8":"-1.01150806"},{"1":"17","2":"4.2","3":"20.86918","4":"-3.86917807","5":"0.005637001","6":"3.835793","7":"2.900093e-03","8":"-1.01150806"},{"1":"16","2":"4.6","3":"19.45694","4":"-3.45694254","5":"0.007546329","6":"3.837493","7":"3.111113e-03","8":"-0.90460743"},{"1":"16","2":"4.6","3":"19.45694","4":"-3.45694254","5":"0.007546329","6":"3.837493","7":"3.111113e-03","8":"-0.90460743"},{"1":"17","2":"4.6","3":"19.45694","4":"-2.45694254","5":"0.007546329","6":"3.840853","7":"1.571526e-03","8":"-0.64292896"},{"1":"15","2":"5.4","3":"16.63247","4":"-1.63247150","5":"0.013833398","6":"3.842757","7":"1.288059e-03","8":"-0.42854218"},{"1":"17","2":"5.4","3":"16.63247","4":"0.36752850","5":"0.013833398","6":"3.844202","7":"6.528698e-05","8":"0.09648038"},{"1":"26","2":"3.8","3":"22.28141","4":"3.71858641","5":"0.004550477","6":"3.836450","7":"2.157697e-03","8":"0.97160864"},{"1":"25","2":"3.8","3":"22.28141","4":"2.71858641","5":"0.004550477","6":"3.840096","7":"1.153243e-03","8":"0.71032423"},{"1":"26","2":"4.0","3":"21.57530","4":"4.42470417","5":"0.004990888","6":"3.833184","7":"3.353578e-03","8":"1.15636203"},{"1":"24","2":"4.0","3":"21.57530","4":"2.42470417","5":"0.004990888","6":"3.840951","7":"1.007065e-03","8":"0.63367758"},{"1":"21","2":"4.6","3":"19.45694","4":"1.54305746","5":"0.007546329","6":"3.842928","7":"6.198629e-04","8":"0.40378491"},{"1":"22","2":"4.6","3":"19.45694","4":"2.54305746","5":"0.007546329","6":"3.840608","7":"1.683619e-03","8":"0.66546338"},{"1":"23","2":"4.6","3":"19.45694","4":"3.54305746","5":"0.007546329","6":"3.837151","7":"3.268044e-03","8":"0.92714185"},{"1":"22","2":"4.6","3":"19.45694","4":"2.54305746","5":"0.007546329","6":"3.840608","7":"1.683619e-03","8":"0.66546338"},{"1":"20","2":"5.4","3":"16.63247","4":"3.36752850","5":"0.013833398","6":"3.837799","7":"5.481092e-03","8":"0.88401421"},{"1":"33","2":"1.6","3":"30.04871","4":"2.95129104","5":"0.013282225","6":"3.839306","7":"4.037618e-03","8":"0.77453077"},{"1":"32","2":"1.6","3":"30.04871","4":"1.95129104","5":"0.013282225","6":"3.842106","7":"1.765002e-03","8":"0.51209282"},{"1":"32","2":"1.6","3":"30.04871","4":"1.95129104","5":"0.013282225","6":"3.842106","7":"1.765002e-03","8":"0.51209282"},{"1":"29","2":"1.6","3":"30.04871","4":"-1.04870896","5":"0.013282225","6":"3.843651","7":"5.098132e-04","8":"-0.27522103"},{"1":"32","2":"1.6","3":"30.04871","4":"1.95129104","5":"0.013282225","6":"3.842106","7":"1.765002e-03","8":"0.51209282"},{"1":"34","2":"1.8","3":"29.34259","4":"4.65740880","5":"0.011459924","6":"3.831904","7":"8.643669e-03","8":"1.22115370"},{"1":"36","2":"1.8","3":"29.34259","4":"6.65740880","5":"0.011459924","6":"3.818951","7":"1.766119e-02","8":"1.74554559"},{"1":"36","2":"1.8","3":"29.34259","4":"6.65740880","5":"0.011459924","6":"3.818951","7":"1.766119e-02","8":"1.74554559"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"26","2":"2.4","3":"27.22424","4":"-1.22423792","5":"0.007227228","6":"3.843429","7":"3.734392e-04","8":"-0.32030521"},{"1":"27","2":"2.4","3":"27.22424","4":"-0.22423792","5":"0.007227228","6":"3.844250","7":"1.252871e-05","8":"-0.05866880"},{"1":"30","2":"2.4","3":"27.22424","4":"2.77576208","5":"0.007227228","6":"3.839907","7":"1.919786e-03","8":"0.72624043"},{"1":"31","2":"2.4","3":"27.22424","4":"3.77576208","5":"0.007227228","6":"3.836185","7":"3.552201e-03","8":"0.98787684"},{"1":"26","2":"2.5","3":"26.87118","4":"-0.87117904","5":"0.006701768","6":"3.843849","7":"1.751706e-04","8":"-0.22787186"},{"1":"26","2":"2.5","3":"26.87118","4":"-0.87117904","5":"0.006701768","6":"3.843849","7":"1.751706e-04","8":"-0.22787186"},{"1":"28","2":"3.3","3":"24.04671","4":"3.95329201","5":"0.004349391","6":"3.835431","7":"2.329960e-03","8":"1.03282924"},{"1":"26","2":"2.0","3":"28.63647","4":"-2.63647344","5":"0.009843324","6":"3.840324","7":"2.371357e-03","8":"-0.69070810"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"28","2":"2.0","3":"28.63647","4":"-0.63647344","5":"0.009843324","6":"3.844049","7":"1.382009e-04","8":"-0.16674447"},{"1":"27","2":"2.0","3":"28.63647","4":"-1.63647344","5":"0.009843324","6":"3.842756","7":"9.136253e-04","8":"-0.42872629"},{"1":"24","2":"2.7","3":"26.16506","4":"-2.16506128","5":"0.005805122","6":"3.841623","7":"9.354593e-04","8":"-0.56605358"},{"1":"24","2":"2.7","3":"26.16506","4":"-2.16506128","5":"0.005805122","6":"3.841623","7":"9.354593e-04","8":"-0.56605358"},{"1":"24","2":"2.7","3":"26.16506","4":"-2.16506128","5":"0.005805122","6":"3.841623","7":"9.354593e-04","8":"-0.56605358"},{"1":"22","2":"3.0","3":"25.10588","4":"-3.10588463","5":"0.004845843","6":"3.838817","7":"1.603893e-03","8":"-0.81163964"},{"1":"19","2":"3.7","3":"22.63447","4":"-3.63447247","5":"0.004407409","6":"3.836801","7":"1.995809e-03","8":"-0.94956274"},{"1":"20","2":"4.0","3":"21.57530","4":"-1.57529583","5":"0.004990888","6":"3.842874","7":"4.250737e-04","8":"-0.41169131"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"12","2":"4.7","3":"19.10388","4":"-7.10388366","5":"0.008152224","6":"3.815524","7":"1.421000e-02","8":"-1.85950110"},{"1":"19","2":"4.7","3":"19.10388","4":"-0.10388366","5":"0.008152224","6":"3.844273","7":"3.038763e-06","8":"-0.02719242"},{"1":"18","2":"5.7","3":"15.57329","4":"2.42670514","5":"0.017039566","6":"3.840904","7":"3.528878e-03","8":"0.63807555"},{"1":"14","2":"6.1","3":"14.16106","4":"-0.16105933","5":"0.022034410","6":"3.844264","7":"2.030684e-05","8":"-0.04245680"},{"1":"15","2":"4.0","3":"21.57530","4":"-6.57529583","5":"0.004990888","6":"3.819736","7":"7.405776e-03","8":"-1.71840243"},{"1":"18","2":"4.2","3":"20.86918","4":"-2.86917807","5":"0.005637001","6":"3.839615","7":"1.594738e-03","8":"-0.75008095"},{"1":"18","2":"4.4","3":"20.16306","4":"-2.16306030","5":"0.006488814","6":"3.841626","7":"1.045137e-03","8":"-0.56572498"},{"1":"15","2":"4.6","3":"19.45694","4":"-4.45694254","5":"0.007546329","6":"3.832993","7":"5.171369e-03","8":"-1.16628590"},{"1":"17","2":"5.4","3":"16.63247","4":"0.36752850","5":"0.013833398","6":"3.844202","7":"6.528698e-05","8":"0.09648038"},{"1":"16","2":"5.4","3":"16.63247","4":"-0.63247150","5":"0.013833398","6":"3.844051","7":"1.933421e-04","8":"-0.16603090"},{"1":"18","2":"5.4","3":"16.63247","4":"1.36752850","5":"0.013833398","6":"3.843211","7":"9.038935e-04","8":"0.35899165"},{"1":"17","2":"4.0","3":"21.57530","4":"-4.57529583","5":"0.004990888","6":"3.832415","7":"3.585736e-03","8":"-1.19571798"},{"1":"19","2":"4.0","3":"21.57530","4":"-2.57529583","5":"0.004990888","6":"3.840524","7":"1.136042e-03","8":"-0.67303354"},{"1":"19","2":"4.6","3":"19.45694","4":"-0.45694254","5":"0.007546329","6":"3.844160","7":"5.435690e-05","8":"-0.11957202"},{"1":"17","2":"5.0","3":"18.04471","4":"-1.04470702","5":"0.010278461","6":"3.843658","7":"3.891413e-04","8":"-0.27375440"},{"1":"29","2":"2.4","3":"27.22424","4":"1.77576208","5":"0.007227228","6":"3.842490","7":"7.857020e-04","8":"0.46460402"},{"1":"27","2":"2.4","3":"27.22424","4":"-0.22423792","5":"0.007227228","6":"3.844250","7":"1.252871e-05","8":"-0.05866880"},{"1":"31","2":"2.5","3":"26.87118","4":"4.12882096","5":"0.006701768","6":"3.834604","7":"3.934580e-03","8":"1.07996413"},{"1":"32","2":"2.5","3":"26.87118","4":"5.12882096","5":"0.006701768","6":"3.829339","7":"6.071295e-03","8":"1.34153132"},{"1":"27","2":"3.5","3":"23.34059","4":"3.65940977","5":"0.004275550","6":"3.836699","7":"1.962239e-03","8":"0.95601469"},{"1":"26","2":"3.5","3":"23.34059","4":"2.65940977","5":"0.004275550","6":"3.840278","7":"1.036335e-03","8":"0.69476636"},{"1":"26","2":"3.0","3":"25.10588","4":"0.89411537","5":"0.004845843","6":"3.843827","7":"1.329205e-04","8":"0.23365307"},{"1":"25","2":"3.0","3":"25.10588","4":"-0.10588463","5":"0.004845843","6":"3.844273","7":"1.864106e-06","8":"-0.02767011"},{"1":"25","2":"3.5","3":"23.34059","4":"1.65940977","5":"0.004275550","6":"3.842722","7":"4.034941e-04","8":"0.43351803"},{"1":"17","2":"3.3","3":"24.04671","4":"-7.04670799","5":"0.004349391","6":"3.816095","7":"7.402924e-03","8":"-1.84100897"},{"1":"17","2":"3.3","3":"24.04671","4":"-7.04670799","5":"0.004349391","6":"3.816095","7":"7.402924e-03","8":"-1.84100897"},{"1":"20","2":"4.0","3":"21.57530","4":"-1.57529583","5":"0.004990888","6":"3.842874","7":"4.250737e-04","8":"-0.41169131"},{"1":"18","2":"5.6","3":"15.92635","4":"2.07364626","5":"0.015919418","6":"3.841818","7":"2.401881e-03","8":"0.54493218"},{"1":"26","2":"3.1","3":"24.75283","4":"1.24717425","5":"0.004628934","6":"3.843399","7":"2.469343e-04","8":"0.32588002"},{"1":"26","2":"3.8","3":"22.28141","4":"3.71858641","5":"0.004550477","6":"3.836450","7":"2.157697e-03","8":"0.97160864"},{"1":"27","2":"3.8","3":"22.28141","4":"4.71858641","5":"0.004550477","6":"3.831665","7":"3.474230e-03","8":"1.23289304"},{"1":"28","2":"3.8","3":"22.28141","4":"5.71858641","5":"0.004550477","6":"3.825737","7":"5.102841e-03","8":"1.49417745"},{"1":"25","2":"5.3","3":"16.98553","4":"8.01446962","5":"0.012867526","6":"3.807466","7":"2.882106e-02","8":"2.10285912"},{"1":"25","2":"2.5","3":"26.87118","4":"-1.87117904","5":"0.006701768","6":"3.842294","7":"8.081220e-04","8":"-0.48943906"},{"1":"24","2":"2.5","3":"26.87118","4":"-2.87117904","5":"0.006701768","6":"3.839603","7":"1.902685e-03","8":"-0.75100625"},{"1":"27","2":"2.5","3":"26.87118","4":"0.12882096","5":"0.006701768","6":"3.844270","7":"3.830182e-06","8":"0.03369534"},{"1":"25","2":"2.5","3":"26.87118","4":"-1.87117904","5":"0.006701768","6":"3.842294","7":"8.081220e-04","8":"-0.48943906"},{"1":"26","2":"2.5","3":"26.87118","4":"-0.87117904","5":"0.006701768","6":"3.843849","7":"1.751706e-04","8":"-0.22787186"},{"1":"23","2":"2.5","3":"26.87118","4":"-3.87117904","5":"0.006701768","6":"3.835775","7":"3.458858e-03","8":"-1.01257345"},{"1":"26","2":"2.2","3":"27.93036","4":"-1.93035568","5":"0.008432426","6":"3.842162","7":"1.085922e-03","8":"-0.50535817"},{"1":"26","2":"2.2","3":"27.93036","4":"-1.93035568","5":"0.008432426","6":"3.842162","7":"1.085922e-03","8":"-0.50535817"},{"1":"26","2":"2.5","3":"26.87118","4":"-0.87117904","5":"0.006701768","6":"3.843849","7":"1.751706e-04","8":"-0.22787186"},{"1":"26","2":"2.5","3":"26.87118","4":"-0.87117904","5":"0.006701768","6":"3.843849","7":"1.751706e-04","8":"-0.22787186"},{"1":"25","2":"2.5","3":"26.87118","4":"-1.87117904","5":"0.006701768","6":"3.842294","7":"8.081220e-04","8":"-0.48943906"},{"1":"27","2":"2.5","3":"26.87118","4":"0.12882096","5":"0.006701768","6":"3.844270","7":"3.830182e-06","8":"0.03369534"},{"1":"25","2":"2.5","3":"26.87118","4":"-1.87117904","5":"0.006701768","6":"3.842294","7":"8.081220e-04","8":"-0.48943906"},{"1":"27","2":"2.5","3":"26.87118","4":"0.12882096","5":"0.006701768","6":"3.844270","7":"3.830182e-06","8":"0.03369534"},{"1":"20","2":"2.7","3":"26.16506","4":"-6.16506128","5":"0.005805122","6":"3.822693","7":"7.585065e-03","8":"-1.61185046"},{"1":"20","2":"2.7","3":"26.16506","4":"-6.16506128","5":"0.005805122","6":"3.822693","7":"7.585065e-03","8":"-1.61185046"},{"1":"19","2":"3.4","3":"23.69365","4":"-4.69364911","5":"0.004286758","6":"3.831801","7":"3.236666e-03","8":"-1.22621490"},{"1":"17","2":"3.4","3":"23.69365","4":"-6.69364911","5":"0.004286758","6":"3.818859","7":"6.582676e-03","8":"-1.74871450"},{"1":"20","2":"4.0","3":"21.57530","4":"-1.57529583","5":"0.004990888","6":"3.842874","7":"4.250737e-04","8":"-0.41169131"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"29","2":"2.2","3":"27.93036","4":"1.06964432","5":"0.008432426","6":"3.843629","7":"3.334286e-04","8":"0.28002792"},{"1":"27","2":"2.2","3":"27.93036","4":"-0.93035568","5":"0.008432426","6":"3.843787","7":"2.522448e-04","8":"-0.24356280"},{"1":"31","2":"2.4","3":"27.22424","4":"3.77576208","5":"0.007227228","6":"3.836185","7":"3.552201e-03","8":"0.98787684"},{"1":"31","2":"2.4","3":"27.22424","4":"3.77576208","5":"0.007227228","6":"3.836185","7":"3.552201e-03","8":"0.98787684"},{"1":"26","2":"3.0","3":"25.10588","4":"0.89411537","5":"0.004845843","6":"3.843827","7":"1.329205e-04","8":"0.23365307"},{"1":"26","2":"3.0","3":"25.10588","4":"0.89411537","5":"0.004845843","6":"3.843827","7":"1.329205e-04","8":"0.23365307"},{"1":"28","2":"3.5","3":"23.34059","4":"4.65940977","5":"0.004275550","6":"3.831983","7":"3.181205e-03","8":"1.21726303"},{"1":"27","2":"2.2","3":"27.93036","4":"-0.93035568","5":"0.008432426","6":"3.843787","7":"2.522448e-04","8":"-0.24356280"},{"1":"29","2":"2.2","3":"27.93036","4":"1.06964432","5":"0.008432426","6":"3.843629","7":"3.334286e-04","8":"0.28002792"},{"1":"31","2":"2.4","3":"27.22424","4":"3.77576208","5":"0.007227228","6":"3.836185","7":"3.552201e-03","8":"0.98787684"},{"1":"31","2":"2.4","3":"27.22424","4":"3.77576208","5":"0.007227228","6":"3.836185","7":"3.552201e-03","8":"0.98787684"},{"1":"26","2":"3.0","3":"25.10588","4":"0.89411537","5":"0.004845843","6":"3.843827","7":"1.329205e-04","8":"0.23365307"},{"1":"26","2":"3.0","3":"25.10588","4":"0.89411537","5":"0.004845843","6":"3.843827","7":"1.329205e-04","8":"0.23365307"},{"1":"27","2":"3.3","3":"24.04671","4":"2.95329201","5":"0.004349391","6":"3.839343","7":"1.300300e-03","8":"0.77157122"},{"1":"30","2":"1.8","3":"29.34259","4":"0.65740880","5":"0.011459924","6":"3.844033","7":"1.722187e-04","8":"0.17236992"},{"1":"33","2":"1.8","3":"29.34259","4":"3.65740880","5":"0.011459924","6":"3.836652","7":"5.330358e-03","8":"0.95895775"},{"1":"35","2":"1.8","3":"29.34259","4":"5.65740880","5":"0.011459924","6":"3.826006","7":"1.275394e-02","8":"1.48334964"},{"1":"37","2":"1.8","3":"29.34259","4":"7.65740880","5":"0.011459924","6":"3.810735","7":"2.336539e-02","8":"2.00774153"},{"1":"35","2":"1.8","3":"29.34259","4":"5.65740880","5":"0.011459924","6":"3.826006","7":"1.275394e-02","8":"1.48334964"},{"1":"15","2":"4.7","3":"19.10388","4":"-4.10388366","5":"0.008152224","6":"3.834706","7":"4.742337e-03","8":"-1.07422595"},{"1":"18","2":"5.7","3":"15.57329","4":"2.42670514","5":"0.017039566","6":"3.840904","7":"3.528878e-03","8":"0.63807555"},{"1":"20","2":"2.7","3":"26.16506","4":"-6.16506128","5":"0.005805122","6":"3.822693","7":"7.585065e-03","8":"-1.61185046"},{"1":"20","2":"2.7","3":"26.16506","4":"-6.16506128","5":"0.005805122","6":"3.822693","7":"7.585065e-03","8":"-1.61185046"},{"1":"22","2":"2.7","3":"26.16506","4":"-4.16506128","5":"0.005805122","6":"3.834442","7":"3.462002e-03","8":"-1.08895202"},{"1":"17","2":"3.4","3":"23.69365","4":"-6.69364911","5":"0.004286758","6":"3.818859","7":"6.582676e-03","8":"-1.74871450"},{"1":"19","2":"3.4","3":"23.69365","4":"-4.69364911","5":"0.004286758","6":"3.831801","7":"3.236666e-03","8":"-1.22621490"},{"1":"18","2":"4.0","3":"21.57530","4":"-3.57529583","5":"0.004990888","6":"3.837039","7":"2.189596e-03","8":"-0.93437576"},{"1":"20","2":"4.0","3":"21.57530","4":"-1.57529583","5":"0.004990888","6":"3.842874","7":"4.250737e-04","8":"-0.41169131"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"26","2":"2.0","3":"28.63647","4":"-2.63647344","5":"0.009843324","6":"3.840324","7":"2.371357e-03","8":"-0.69070810"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"24","2":"2.8","3":"25.81200","4":"-1.81200239","5":"0.005433937","6":"3.842420","7":"6.128880e-04","8":"-0.47365820"},{"1":"44","2":"1.9","3":"28.98953","4":"15.01046768","5":"0.010625911","6":"3.713842","7":"8.310933e-02","8":"3.93402457"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"26","2":"2.0","3":"28.63647","4":"-2.63647344","5":"0.009843324","6":"3.840324","7":"2.371357e-03","8":"-0.69070810"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"29","2":"2.5","3":"26.87118","4":"2.12882096","5":"0.006701768","6":"3.841709","7":"1.045983e-03","8":"0.55682973"},{"1":"29","2":"2.5","3":"26.87118","4":"2.12882096","5":"0.006701768","6":"3.841709","7":"1.045983e-03","8":"0.55682973"},{"1":"23","2":"2.8","3":"25.81200","4":"-2.81200239","5":"0.005433937","6":"3.839800","7":"1.476029e-03","8":"-0.73505863"},{"1":"24","2":"2.8","3":"25.81200","4":"-1.81200239","5":"0.005433937","6":"3.842420","7":"6.128880e-04","8":"-0.47365820"},{"1":"44","2":"1.9","3":"28.98953","4":"15.01046768","5":"0.010625911","6":"3.713842","7":"8.310933e-02","8":"3.93402457"},{"1":"41","2":"1.9","3":"28.98953","4":"12.01046768","5":"0.010625911","6":"3.761291","7":"5.320852e-02","8":"3.14776834"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"26","2":"2.0","3":"28.63647","4":"-2.63647344","5":"0.009843324","6":"3.840324","7":"2.371357e-03","8":"-0.69070810"},{"1":"28","2":"2.5","3":"26.87118","4":"1.12882096","5":"0.006701768","6":"3.843557","7":"2.941009e-04","8":"0.29526254"},{"1":"29","2":"2.5","3":"26.87118","4":"2.12882096","5":"0.006701768","6":"3.841709","7":"1.045983e-03","8":"0.55682973"},{"1":"29","2":"1.8","3":"29.34259","4":"-0.34259120","5":"0.011459924","6":"3.844212","7":"4.676940e-05","8":"-0.08982602"},{"1":"29","2":"1.8","3":"29.34259","4":"-0.34259120","5":"0.011459924","6":"3.844212","7":"4.676940e-05","8":"-0.08982602"},{"1":"28","2":"2.0","3":"28.63647","4":"-0.63647344","5":"0.009843324","6":"3.844049","7":"1.382009e-04","8":"-0.16674447"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"26","2":"2.8","3":"25.81200","4":"0.18799761","5":"0.005433937","6":"3.844259","7":"6.597330e-06","8":"0.04914265"},{"1":"26","2":"2.8","3":"25.81200","4":"0.18799761","5":"0.005433937","6":"3.844259","7":"6.597330e-06","8":"0.04914265"},{"1":"26","2":"3.6","3":"22.98753","4":"3.01246865","5":"0.004315767","6":"3.839144","7":"1.342382e-03","8":"0.78701830"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;

]

.pull-right[


```r
slr_tm$fit %&gt;% #need to pull the fit out of the rest of the model output
  augment()
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["hwy"],"name":[1],"type":["int"],"align":["right"]},{"label":["displ"],"name":[2],"type":["dbl"],"align":["right"]},{"label":[".fitted"],"name":[3],"type":["dbl"],"align":["right"]},{"label":[".resid"],"name":[4],"type":["dbl"],"align":["right"]},{"label":[".hat"],"name":[5],"type":["dbl"],"align":["right"]},{"label":[".sigma"],"name":[6],"type":["dbl"],"align":["right"]},{"label":[".cooksd"],"name":[7],"type":["dbl"],"align":["right"]},{"label":[".std.resid"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"29","2":"1.8","3":"29.34259","4":"-0.34259120","5":"0.011459924","6":"3.844212","7":"4.676940e-05","8":"-0.08982602"},{"1":"29","2":"1.8","3":"29.34259","4":"-0.34259120","5":"0.011459924","6":"3.844212","7":"4.676940e-05","8":"-0.08982602"},{"1":"31","2":"2.0","3":"28.63647","4":"2.36352656","5":"0.009843324","6":"3.841101","7":"1.905773e-03","8":"0.61920098"},{"1":"30","2":"2.0","3":"28.63647","4":"1.36352656","5":"0.009843324","6":"3.843222","7":"6.342747e-04","8":"0.35721917"},{"1":"26","2":"2.8","3":"25.81200","4":"0.18799761","5":"0.005433937","6":"3.844259","7":"6.597330e-06","8":"0.04914265"},{"1":"26","2":"2.8","3":"25.81200","4":"0.18799761","5":"0.005433937","6":"3.844259","7":"6.597330e-06","8":"0.04914265"},{"1":"27","2":"3.1","3":"24.75283","4":"2.24717425","5":"0.004628934","6":"3.841421","7":"8.016793e-04","8":"0.58717473"},{"1":"26","2":"1.8","3":"29.34259","4":"-3.34259120","5":"0.011459924","6":"3.837910","7":"4.452213e-03","8":"-0.87641386"},{"1":"25","2":"1.8","3":"29.34259","4":"-4.34259120","5":"0.011459924","6":"3.833523","7":"7.514625e-03","8":"-1.13860980"},{"1":"28","2":"2.0","3":"28.63647","4":"-0.63647344","5":"0.009843324","6":"3.844049","7":"1.382009e-04","8":"-0.16674447"},{"1":"27","2":"2.0","3":"28.63647","4":"-1.63647344","5":"0.009843324","6":"3.842756","7":"9.136253e-04","8":"-0.42872629"},{"1":"25","2":"2.8","3":"25.81200","4":"-0.81200239","5":"0.005433937","6":"3.843906","7":"1.230774e-04","8":"-0.21225777"},{"1":"25","2":"2.8","3":"25.81200","4":"-0.81200239","5":"0.005433937","6":"3.843906","7":"1.230774e-04","8":"-0.21225777"},{"1":"25","2":"3.1","3":"24.75283","4":"0.24717425","5":"0.004628934","6":"3.844244","7":"9.699148e-06","8":"0.06458532"},{"1":"25","2":"3.1","3":"24.75283","4":"0.24717425","5":"0.004628934","6":"3.844244","7":"9.699148e-06","8":"0.06458532"},{"1":"24","2":"2.8","3":"25.81200","4":"-1.81200239","5":"0.005433937","6":"3.842420","7":"6.128880e-04","8":"-0.47365820"},{"1":"25","2":"3.1","3":"24.75283","4":"0.24717425","5":"0.004628934","6":"3.844244","7":"9.699148e-06","8":"0.06458532"},{"1":"23","2":"4.2","3":"20.86918","4":"2.13082193","5":"0.005637001","6":"3.841707","7":"8.795666e-04","8":"0.55705463"},{"1":"20","2":"5.3","3":"16.98553","4":"3.01446962","5":"0.012867526","6":"3.839092","7":"4.077390e-03","8":"0.79094503"},{"1":"15","2":"5.3","3":"16.98553","4":"-1.98553038","5":"0.012867526","6":"3.842030","7":"1.768941e-03","8":"-0.52096905"},{"1":"20","2":"5.3","3":"16.98553","4":"3.01446962","5":"0.012867526","6":"3.839092","7":"4.077390e-03","8":"0.79094503"},{"1":"17","2":"5.7","3":"15.57329","4":"1.42670514","5":"0.017039566","6":"3.843113","7":"1.219751e-03","8":"0.37513650"},{"1":"17","2":"6.0","3":"14.51412","4":"2.48588179","5":"0.020708561","6":"3.840724","7":"4.534226e-03","8":"0.65485870"},{"1":"26","2":"5.7","3":"15.57329","4":"10.42670514","5":"0.017039566","6":"3.781493","7":"6.514737e-02","8":"2.74158796"},{"1":"23","2":"5.7","3":"15.57329","4":"7.42670514","5":"0.017039566","6":"3.812554","7":"3.305179e-02","8":"1.95277080"},{"1":"26","2":"6.2","3":"13.80800","4":"12.19199955","5":"0.023411684","6":"3.757602","7":"1.239869e-01","8":"3.21619436"},{"1":"25","2":"6.2","3":"13.80800","4":"11.19199955","5":"0.023411684","6":"3.771369","7":"1.044819e-01","8":"2.95239888"},{"1":"24","2":"7.0","3":"10.98353","4":"13.01647059","5":"0.036281188","6":"3.743983","7":"2.248969e-01","8":"3.45653679"},{"1":"19","2":"5.3","3":"16.98553","4":"2.01446962","5":"0.012867526","6":"3.841964","7":"1.820882e-03","8":"0.52856221"},{"1":"14","2":"5.3","3":"16.98553","4":"-2.98553038","5":"0.012867526","6":"3.839192","7":"3.999479e-03","8":"-0.78335187"},{"1":"15","2":"5.7","3":"15.57329","4":"-0.57329486","5":"0.017039566","6":"3.844091","7":"1.969513e-04","8":"-0.15074161"},{"1":"17","2":"6.5","3":"12.74882","4":"4.25117619","5":"0.027852059","6":"3.833797","7":"1.809785e-02","8":"1.12399928"},{"1":"27","2":"2.4","3":"27.22424","4":"-0.22423792","5":"0.007227228","6":"3.844250","7":"1.252871e-05","8":"-0.05866880"},{"1":"30","2":"2.4","3":"27.22424","4":"2.77576208","5":"0.007227228","6":"3.839907","7":"1.919786e-03","8":"0.72624043"},{"1":"26","2":"3.1","3":"24.75283","4":"1.24717425","5":"0.004628934","6":"3.843399","7":"2.469343e-04","8":"0.32588002"},{"1":"29","2":"3.5","3":"23.34059","4":"5.65940977","5":"0.004275550","6":"3.826125","7":"4.693233e-03","8":"1.47851136"},{"1":"26","2":"3.6","3":"22.98753","4":"3.01246865","5":"0.004315767","6":"3.839144","7":"1.342382e-03","8":"0.78701830"},{"1":"24","2":"2.4","3":"27.22424","4":"-3.22423792","5":"0.007227228","6":"3.838379","7":"2.590255e-03","8":"-0.84357803"},{"1":"24","2":"3.0","3":"25.10588","4":"-1.10588463","5":"0.004845843","6":"3.843587","7":"2.033408e-04","8":"-0.28899329"},{"1":"22","2":"3.3","3":"24.04671","4":"-2.04670799","5":"0.004349391","6":"3.841909","7":"6.245145e-04","8":"-0.53471887"},{"1":"22","2":"3.3","3":"24.04671","4":"-2.04670799","5":"0.004349391","6":"3.841909","7":"6.245145e-04","8":"-0.53471887"},{"1":"24","2":"3.3","3":"24.04671","4":"-0.04670799","5":"0.004349391","6":"3.844278","7":"3.252469e-07","8":"-0.01220284"},{"1":"24","2":"3.3","3":"24.04671","4":"-0.04670799","5":"0.004349391","6":"3.844278","7":"3.252469e-07","8":"-0.01220284"},{"1":"17","2":"3.3","3":"24.04671","4":"-7.04670799","5":"0.004349391","6":"3.816095","7":"7.402924e-03","8":"-1.84100897"},{"1":"22","2":"3.8","3":"22.28141","4":"-0.28141359","5":"0.004550477","6":"3.844234","7":"1.235733e-05","8":"-0.07352898"},{"1":"21","2":"3.8","3":"22.28141","4":"-1.28141359","5":"0.004550477","6":"3.843350","7":"2.562202e-04","8":"-0.33481339"},{"1":"23","2":"3.8","3":"22.28141","4":"0.71858641","5":"0.004550477","6":"3.843987","7":"8.057358e-05","8":"0.18775542"},{"1":"23","2":"4.0","3":"21.57530","4":"1.42470417","5":"0.004990888","6":"3.843130","7":"3.476877e-04","8":"0.37233536"},{"1":"19","2":"3.7","3":"22.63447","4":"-3.63447247","5":"0.004407409","6":"3.836801","7":"1.995809e-03","8":"-0.94956274"},{"1":"18","2":"3.7","3":"22.63447","4":"-4.63447247","5":"0.004407409","6":"3.832113","7":"3.245166e-03","8":"-1.21082837"},{"1":"17","2":"3.9","3":"21.92835","4":"-4.92835471","5":"0.004744970","6":"3.830513","7":"3.953528e-03","8":"-1.28782804"},{"1":"17","2":"3.9","3":"21.92835","4":"-4.92835471","5":"0.004744970","6":"3.830513","7":"3.953528e-03","8":"-1.28782804"},{"1":"19","2":"4.7","3":"19.10388","4":"-0.10388366","5":"0.008152224","6":"3.844273","7":"3.038763e-06","8":"-0.02719242"},{"1":"19","2":"4.7","3":"19.10388","4":"-0.10388366","5":"0.008152224","6":"3.844273","7":"3.038763e-06","8":"-0.02719242"},{"1":"12","2":"4.7","3":"19.10388","4":"-7.10388366","5":"0.008152224","6":"3.815524","7":"1.421000e-02","8":"-1.85950110"},{"1":"17","2":"5.2","3":"17.33859","4":"-0.33858926","5":"0.011953079","6":"3.844214","7":"4.769658e-05","8":"-0.08879888"},{"1":"15","2":"5.2","3":"17.33859","4":"-2.33858926","5":"0.011953079","6":"3.841161","7":"2.275353e-03","8":"-0.61332162"},{"1":"17","2":"3.9","3":"21.92835","4":"-4.92835471","5":"0.004744970","6":"3.830513","7":"3.953528e-03","8":"-1.28782804"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"12","2":"4.7","3":"19.10388","4":"-7.10388366","5":"0.008152224","6":"3.815524","7":"1.421000e-02","8":"-1.85950110"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"16","2":"5.2","3":"17.33859","4":"-1.33858926","5":"0.011953079","6":"3.843258","7":"7.454792e-04","8":"-0.35106025"},{"1":"18","2":"5.7","3":"15.57329","4":"2.42670514","5":"0.017039566","6":"3.840904","7":"3.528878e-03","8":"0.63807555"},{"1":"15","2":"5.9","3":"14.86718","4":"0.13282290","5":"0.019434137","6":"3.844269","7":"1.211641e-05","8":"0.03496695"},{"1":"16","2":"4.7","3":"19.10388","4":"-3.10388366","5":"0.008152224","6":"3.838806","7":"2.712771e-03","8":"-0.81246757"},{"1":"12","2":"4.7","3":"19.10388","4":"-7.10388366","5":"0.008152224","6":"3.815524","7":"1.421000e-02","8":"-1.85950110"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"16","2":"4.7","3":"19.10388","4":"-3.10388366","5":"0.008152224","6":"3.838806","7":"2.712771e-03","8":"-0.81246757"},{"1":"12","2":"4.7","3":"19.10388","4":"-7.10388366","5":"0.008152224","6":"3.815524","7":"1.421000e-02","8":"-1.85950110"},{"1":"15","2":"5.2","3":"17.33859","4":"-2.33858926","5":"0.011953079","6":"3.841161","7":"2.275353e-03","8":"-0.61332162"},{"1":"16","2":"5.2","3":"17.33859","4":"-1.33858926","5":"0.011953079","6":"3.843258","7":"7.454792e-04","8":"-0.35106025"},{"1":"17","2":"5.7","3":"15.57329","4":"1.42670514","5":"0.017039566","6":"3.843113","7":"1.219751e-03","8":"0.37513650"},{"1":"15","2":"5.9","3":"14.86718","4":"0.13282290","5":"0.019434137","6":"3.844269","7":"1.211641e-05","8":"0.03496695"},{"1":"17","2":"4.6","3":"19.45694","4":"-2.45694254","5":"0.007546329","6":"3.840853","7":"1.571526e-03","8":"-0.64292896"},{"1":"17","2":"5.4","3":"16.63247","4":"0.36752850","5":"0.013833398","6":"3.844202","7":"6.528698e-05","8":"0.09648038"},{"1":"18","2":"5.4","3":"16.63247","4":"1.36752850","5":"0.013833398","6":"3.843211","7":"9.038935e-04","8":"0.35899165"},{"1":"17","2":"4.0","3":"21.57530","4":"-4.57529583","5":"0.004990888","6":"3.832415","7":"3.585736e-03","8":"-1.19571798"},{"1":"19","2":"4.0","3":"21.57530","4":"-2.57529583","5":"0.004990888","6":"3.840524","7":"1.136042e-03","8":"-0.67303354"},{"1":"17","2":"4.0","3":"21.57530","4":"-4.57529583","5":"0.004990888","6":"3.832415","7":"3.585736e-03","8":"-1.19571798"},{"1":"19","2":"4.0","3":"21.57530","4":"-2.57529583","5":"0.004990888","6":"3.840524","7":"1.136042e-03","8":"-0.67303354"},{"1":"19","2":"4.6","3":"19.45694","4":"-0.45694254","5":"0.007546329","6":"3.844160","7":"5.435690e-05","8":"-0.11957202"},{"1":"17","2":"5.0","3":"18.04471","4":"-1.04470702","5":"0.010278461","6":"3.843658","7":"3.891413e-04","8":"-0.27375440"},{"1":"17","2":"4.2","3":"20.86918","4":"-3.86917807","5":"0.005637001","6":"3.835793","7":"2.900093e-03","8":"-1.01150806"},{"1":"17","2":"4.2","3":"20.86918","4":"-3.86917807","5":"0.005637001","6":"3.835793","7":"2.900093e-03","8":"-1.01150806"},{"1":"16","2":"4.6","3":"19.45694","4":"-3.45694254","5":"0.007546329","6":"3.837493","7":"3.111113e-03","8":"-0.90460743"},{"1":"16","2":"4.6","3":"19.45694","4":"-3.45694254","5":"0.007546329","6":"3.837493","7":"3.111113e-03","8":"-0.90460743"},{"1":"17","2":"4.6","3":"19.45694","4":"-2.45694254","5":"0.007546329","6":"3.840853","7":"1.571526e-03","8":"-0.64292896"},{"1":"15","2":"5.4","3":"16.63247","4":"-1.63247150","5":"0.013833398","6":"3.842757","7":"1.288059e-03","8":"-0.42854218"},{"1":"17","2":"5.4","3":"16.63247","4":"0.36752850","5":"0.013833398","6":"3.844202","7":"6.528698e-05","8":"0.09648038"},{"1":"26","2":"3.8","3":"22.28141","4":"3.71858641","5":"0.004550477","6":"3.836450","7":"2.157697e-03","8":"0.97160864"},{"1":"25","2":"3.8","3":"22.28141","4":"2.71858641","5":"0.004550477","6":"3.840096","7":"1.153243e-03","8":"0.71032423"},{"1":"26","2":"4.0","3":"21.57530","4":"4.42470417","5":"0.004990888","6":"3.833184","7":"3.353578e-03","8":"1.15636203"},{"1":"24","2":"4.0","3":"21.57530","4":"2.42470417","5":"0.004990888","6":"3.840951","7":"1.007065e-03","8":"0.63367758"},{"1":"21","2":"4.6","3":"19.45694","4":"1.54305746","5":"0.007546329","6":"3.842928","7":"6.198629e-04","8":"0.40378491"},{"1":"22","2":"4.6","3":"19.45694","4":"2.54305746","5":"0.007546329","6":"3.840608","7":"1.683619e-03","8":"0.66546338"},{"1":"23","2":"4.6","3":"19.45694","4":"3.54305746","5":"0.007546329","6":"3.837151","7":"3.268044e-03","8":"0.92714185"},{"1":"22","2":"4.6","3":"19.45694","4":"2.54305746","5":"0.007546329","6":"3.840608","7":"1.683619e-03","8":"0.66546338"},{"1":"20","2":"5.4","3":"16.63247","4":"3.36752850","5":"0.013833398","6":"3.837799","7":"5.481092e-03","8":"0.88401421"},{"1":"33","2":"1.6","3":"30.04871","4":"2.95129104","5":"0.013282225","6":"3.839306","7":"4.037618e-03","8":"0.77453077"},{"1":"32","2":"1.6","3":"30.04871","4":"1.95129104","5":"0.013282225","6":"3.842106","7":"1.765002e-03","8":"0.51209282"},{"1":"32","2":"1.6","3":"30.04871","4":"1.95129104","5":"0.013282225","6":"3.842106","7":"1.765002e-03","8":"0.51209282"},{"1":"29","2":"1.6","3":"30.04871","4":"-1.04870896","5":"0.013282225","6":"3.843651","7":"5.098132e-04","8":"-0.27522103"},{"1":"32","2":"1.6","3":"30.04871","4":"1.95129104","5":"0.013282225","6":"3.842106","7":"1.765002e-03","8":"0.51209282"},{"1":"34","2":"1.8","3":"29.34259","4":"4.65740880","5":"0.011459924","6":"3.831904","7":"8.643669e-03","8":"1.22115370"},{"1":"36","2":"1.8","3":"29.34259","4":"6.65740880","5":"0.011459924","6":"3.818951","7":"1.766119e-02","8":"1.74554559"},{"1":"36","2":"1.8","3":"29.34259","4":"6.65740880","5":"0.011459924","6":"3.818951","7":"1.766119e-02","8":"1.74554559"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"26","2":"2.4","3":"27.22424","4":"-1.22423792","5":"0.007227228","6":"3.843429","7":"3.734392e-04","8":"-0.32030521"},{"1":"27","2":"2.4","3":"27.22424","4":"-0.22423792","5":"0.007227228","6":"3.844250","7":"1.252871e-05","8":"-0.05866880"},{"1":"30","2":"2.4","3":"27.22424","4":"2.77576208","5":"0.007227228","6":"3.839907","7":"1.919786e-03","8":"0.72624043"},{"1":"31","2":"2.4","3":"27.22424","4":"3.77576208","5":"0.007227228","6":"3.836185","7":"3.552201e-03","8":"0.98787684"},{"1":"26","2":"2.5","3":"26.87118","4":"-0.87117904","5":"0.006701768","6":"3.843849","7":"1.751706e-04","8":"-0.22787186"},{"1":"26","2":"2.5","3":"26.87118","4":"-0.87117904","5":"0.006701768","6":"3.843849","7":"1.751706e-04","8":"-0.22787186"},{"1":"28","2":"3.3","3":"24.04671","4":"3.95329201","5":"0.004349391","6":"3.835431","7":"2.329960e-03","8":"1.03282924"},{"1":"26","2":"2.0","3":"28.63647","4":"-2.63647344","5":"0.009843324","6":"3.840324","7":"2.371357e-03","8":"-0.69070810"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"28","2":"2.0","3":"28.63647","4":"-0.63647344","5":"0.009843324","6":"3.844049","7":"1.382009e-04","8":"-0.16674447"},{"1":"27","2":"2.0","3":"28.63647","4":"-1.63647344","5":"0.009843324","6":"3.842756","7":"9.136253e-04","8":"-0.42872629"},{"1":"24","2":"2.7","3":"26.16506","4":"-2.16506128","5":"0.005805122","6":"3.841623","7":"9.354593e-04","8":"-0.56605358"},{"1":"24","2":"2.7","3":"26.16506","4":"-2.16506128","5":"0.005805122","6":"3.841623","7":"9.354593e-04","8":"-0.56605358"},{"1":"24","2":"2.7","3":"26.16506","4":"-2.16506128","5":"0.005805122","6":"3.841623","7":"9.354593e-04","8":"-0.56605358"},{"1":"22","2":"3.0","3":"25.10588","4":"-3.10588463","5":"0.004845843","6":"3.838817","7":"1.603893e-03","8":"-0.81163964"},{"1":"19","2":"3.7","3":"22.63447","4":"-3.63447247","5":"0.004407409","6":"3.836801","7":"1.995809e-03","8":"-0.94956274"},{"1":"20","2":"4.0","3":"21.57530","4":"-1.57529583","5":"0.004990888","6":"3.842874","7":"4.250737e-04","8":"-0.41169131"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"12","2":"4.7","3":"19.10388","4":"-7.10388366","5":"0.008152224","6":"3.815524","7":"1.421000e-02","8":"-1.85950110"},{"1":"19","2":"4.7","3":"19.10388","4":"-0.10388366","5":"0.008152224","6":"3.844273","7":"3.038763e-06","8":"-0.02719242"},{"1":"18","2":"5.7","3":"15.57329","4":"2.42670514","5":"0.017039566","6":"3.840904","7":"3.528878e-03","8":"0.63807555"},{"1":"14","2":"6.1","3":"14.16106","4":"-0.16105933","5":"0.022034410","6":"3.844264","7":"2.030684e-05","8":"-0.04245680"},{"1":"15","2":"4.0","3":"21.57530","4":"-6.57529583","5":"0.004990888","6":"3.819736","7":"7.405776e-03","8":"-1.71840243"},{"1":"18","2":"4.2","3":"20.86918","4":"-2.86917807","5":"0.005637001","6":"3.839615","7":"1.594738e-03","8":"-0.75008095"},{"1":"18","2":"4.4","3":"20.16306","4":"-2.16306030","5":"0.006488814","6":"3.841626","7":"1.045137e-03","8":"-0.56572498"},{"1":"15","2":"4.6","3":"19.45694","4":"-4.45694254","5":"0.007546329","6":"3.832993","7":"5.171369e-03","8":"-1.16628590"},{"1":"17","2":"5.4","3":"16.63247","4":"0.36752850","5":"0.013833398","6":"3.844202","7":"6.528698e-05","8":"0.09648038"},{"1":"16","2":"5.4","3":"16.63247","4":"-0.63247150","5":"0.013833398","6":"3.844051","7":"1.933421e-04","8":"-0.16603090"},{"1":"18","2":"5.4","3":"16.63247","4":"1.36752850","5":"0.013833398","6":"3.843211","7":"9.038935e-04","8":"0.35899165"},{"1":"17","2":"4.0","3":"21.57530","4":"-4.57529583","5":"0.004990888","6":"3.832415","7":"3.585736e-03","8":"-1.19571798"},{"1":"19","2":"4.0","3":"21.57530","4":"-2.57529583","5":"0.004990888","6":"3.840524","7":"1.136042e-03","8":"-0.67303354"},{"1":"19","2":"4.6","3":"19.45694","4":"-0.45694254","5":"0.007546329","6":"3.844160","7":"5.435690e-05","8":"-0.11957202"},{"1":"17","2":"5.0","3":"18.04471","4":"-1.04470702","5":"0.010278461","6":"3.843658","7":"3.891413e-04","8":"-0.27375440"},{"1":"29","2":"2.4","3":"27.22424","4":"1.77576208","5":"0.007227228","6":"3.842490","7":"7.857020e-04","8":"0.46460402"},{"1":"27","2":"2.4","3":"27.22424","4":"-0.22423792","5":"0.007227228","6":"3.844250","7":"1.252871e-05","8":"-0.05866880"},{"1":"31","2":"2.5","3":"26.87118","4":"4.12882096","5":"0.006701768","6":"3.834604","7":"3.934580e-03","8":"1.07996413"},{"1":"32","2":"2.5","3":"26.87118","4":"5.12882096","5":"0.006701768","6":"3.829339","7":"6.071295e-03","8":"1.34153132"},{"1":"27","2":"3.5","3":"23.34059","4":"3.65940977","5":"0.004275550","6":"3.836699","7":"1.962239e-03","8":"0.95601469"},{"1":"26","2":"3.5","3":"23.34059","4":"2.65940977","5":"0.004275550","6":"3.840278","7":"1.036335e-03","8":"0.69476636"},{"1":"26","2":"3.0","3":"25.10588","4":"0.89411537","5":"0.004845843","6":"3.843827","7":"1.329205e-04","8":"0.23365307"},{"1":"25","2":"3.0","3":"25.10588","4":"-0.10588463","5":"0.004845843","6":"3.844273","7":"1.864106e-06","8":"-0.02767011"},{"1":"25","2":"3.5","3":"23.34059","4":"1.65940977","5":"0.004275550","6":"3.842722","7":"4.034941e-04","8":"0.43351803"},{"1":"17","2":"3.3","3":"24.04671","4":"-7.04670799","5":"0.004349391","6":"3.816095","7":"7.402924e-03","8":"-1.84100897"},{"1":"17","2":"3.3","3":"24.04671","4":"-7.04670799","5":"0.004349391","6":"3.816095","7":"7.402924e-03","8":"-1.84100897"},{"1":"20","2":"4.0","3":"21.57530","4":"-1.57529583","5":"0.004990888","6":"3.842874","7":"4.250737e-04","8":"-0.41169131"},{"1":"18","2":"5.6","3":"15.92635","4":"2.07364626","5":"0.015919418","6":"3.841818","7":"2.401881e-03","8":"0.54493218"},{"1":"26","2":"3.1","3":"24.75283","4":"1.24717425","5":"0.004628934","6":"3.843399","7":"2.469343e-04","8":"0.32588002"},{"1":"26","2":"3.8","3":"22.28141","4":"3.71858641","5":"0.004550477","6":"3.836450","7":"2.157697e-03","8":"0.97160864"},{"1":"27","2":"3.8","3":"22.28141","4":"4.71858641","5":"0.004550477","6":"3.831665","7":"3.474230e-03","8":"1.23289304"},{"1":"28","2":"3.8","3":"22.28141","4":"5.71858641","5":"0.004550477","6":"3.825737","7":"5.102841e-03","8":"1.49417745"},{"1":"25","2":"5.3","3":"16.98553","4":"8.01446962","5":"0.012867526","6":"3.807466","7":"2.882106e-02","8":"2.10285912"},{"1":"25","2":"2.5","3":"26.87118","4":"-1.87117904","5":"0.006701768","6":"3.842294","7":"8.081220e-04","8":"-0.48943906"},{"1":"24","2":"2.5","3":"26.87118","4":"-2.87117904","5":"0.006701768","6":"3.839603","7":"1.902685e-03","8":"-0.75100625"},{"1":"27","2":"2.5","3":"26.87118","4":"0.12882096","5":"0.006701768","6":"3.844270","7":"3.830182e-06","8":"0.03369534"},{"1":"25","2":"2.5","3":"26.87118","4":"-1.87117904","5":"0.006701768","6":"3.842294","7":"8.081220e-04","8":"-0.48943906"},{"1":"26","2":"2.5","3":"26.87118","4":"-0.87117904","5":"0.006701768","6":"3.843849","7":"1.751706e-04","8":"-0.22787186"},{"1":"23","2":"2.5","3":"26.87118","4":"-3.87117904","5":"0.006701768","6":"3.835775","7":"3.458858e-03","8":"-1.01257345"},{"1":"26","2":"2.2","3":"27.93036","4":"-1.93035568","5":"0.008432426","6":"3.842162","7":"1.085922e-03","8":"-0.50535817"},{"1":"26","2":"2.2","3":"27.93036","4":"-1.93035568","5":"0.008432426","6":"3.842162","7":"1.085922e-03","8":"-0.50535817"},{"1":"26","2":"2.5","3":"26.87118","4":"-0.87117904","5":"0.006701768","6":"3.843849","7":"1.751706e-04","8":"-0.22787186"},{"1":"26","2":"2.5","3":"26.87118","4":"-0.87117904","5":"0.006701768","6":"3.843849","7":"1.751706e-04","8":"-0.22787186"},{"1":"25","2":"2.5","3":"26.87118","4":"-1.87117904","5":"0.006701768","6":"3.842294","7":"8.081220e-04","8":"-0.48943906"},{"1":"27","2":"2.5","3":"26.87118","4":"0.12882096","5":"0.006701768","6":"3.844270","7":"3.830182e-06","8":"0.03369534"},{"1":"25","2":"2.5","3":"26.87118","4":"-1.87117904","5":"0.006701768","6":"3.842294","7":"8.081220e-04","8":"-0.48943906"},{"1":"27","2":"2.5","3":"26.87118","4":"0.12882096","5":"0.006701768","6":"3.844270","7":"3.830182e-06","8":"0.03369534"},{"1":"20","2":"2.7","3":"26.16506","4":"-6.16506128","5":"0.005805122","6":"3.822693","7":"7.585065e-03","8":"-1.61185046"},{"1":"20","2":"2.7","3":"26.16506","4":"-6.16506128","5":"0.005805122","6":"3.822693","7":"7.585065e-03","8":"-1.61185046"},{"1":"19","2":"3.4","3":"23.69365","4":"-4.69364911","5":"0.004286758","6":"3.831801","7":"3.236666e-03","8":"-1.22621490"},{"1":"17","2":"3.4","3":"23.69365","4":"-6.69364911","5":"0.004286758","6":"3.818859","7":"6.582676e-03","8":"-1.74871450"},{"1":"20","2":"4.0","3":"21.57530","4":"-1.57529583","5":"0.004990888","6":"3.842874","7":"4.250737e-04","8":"-0.41169131"},{"1":"17","2":"4.7","3":"19.10388","4":"-2.10388366","5":"0.008152224","6":"3.841765","7":"1.246366e-03","8":"-0.55070918"},{"1":"29","2":"2.2","3":"27.93036","4":"1.06964432","5":"0.008432426","6":"3.843629","7":"3.334286e-04","8":"0.28002792"},{"1":"27","2":"2.2","3":"27.93036","4":"-0.93035568","5":"0.008432426","6":"3.843787","7":"2.522448e-04","8":"-0.24356280"},{"1":"31","2":"2.4","3":"27.22424","4":"3.77576208","5":"0.007227228","6":"3.836185","7":"3.552201e-03","8":"0.98787684"},{"1":"31","2":"2.4","3":"27.22424","4":"3.77576208","5":"0.007227228","6":"3.836185","7":"3.552201e-03","8":"0.98787684"},{"1":"26","2":"3.0","3":"25.10588","4":"0.89411537","5":"0.004845843","6":"3.843827","7":"1.329205e-04","8":"0.23365307"},{"1":"26","2":"3.0","3":"25.10588","4":"0.89411537","5":"0.004845843","6":"3.843827","7":"1.329205e-04","8":"0.23365307"},{"1":"28","2":"3.5","3":"23.34059","4":"4.65940977","5":"0.004275550","6":"3.831983","7":"3.181205e-03","8":"1.21726303"},{"1":"27","2":"2.2","3":"27.93036","4":"-0.93035568","5":"0.008432426","6":"3.843787","7":"2.522448e-04","8":"-0.24356280"},{"1":"29","2":"2.2","3":"27.93036","4":"1.06964432","5":"0.008432426","6":"3.843629","7":"3.334286e-04","8":"0.28002792"},{"1":"31","2":"2.4","3":"27.22424","4":"3.77576208","5":"0.007227228","6":"3.836185","7":"3.552201e-03","8":"0.98787684"},{"1":"31","2":"2.4","3":"27.22424","4":"3.77576208","5":"0.007227228","6":"3.836185","7":"3.552201e-03","8":"0.98787684"},{"1":"26","2":"3.0","3":"25.10588","4":"0.89411537","5":"0.004845843","6":"3.843827","7":"1.329205e-04","8":"0.23365307"},{"1":"26","2":"3.0","3":"25.10588","4":"0.89411537","5":"0.004845843","6":"3.843827","7":"1.329205e-04","8":"0.23365307"},{"1":"27","2":"3.3","3":"24.04671","4":"2.95329201","5":"0.004349391","6":"3.839343","7":"1.300300e-03","8":"0.77157122"},{"1":"30","2":"1.8","3":"29.34259","4":"0.65740880","5":"0.011459924","6":"3.844033","7":"1.722187e-04","8":"0.17236992"},{"1":"33","2":"1.8","3":"29.34259","4":"3.65740880","5":"0.011459924","6":"3.836652","7":"5.330358e-03","8":"0.95895775"},{"1":"35","2":"1.8","3":"29.34259","4":"5.65740880","5":"0.011459924","6":"3.826006","7":"1.275394e-02","8":"1.48334964"},{"1":"37","2":"1.8","3":"29.34259","4":"7.65740880","5":"0.011459924","6":"3.810735","7":"2.336539e-02","8":"2.00774153"},{"1":"35","2":"1.8","3":"29.34259","4":"5.65740880","5":"0.011459924","6":"3.826006","7":"1.275394e-02","8":"1.48334964"},{"1":"15","2":"4.7","3":"19.10388","4":"-4.10388366","5":"0.008152224","6":"3.834706","7":"4.742337e-03","8":"-1.07422595"},{"1":"18","2":"5.7","3":"15.57329","4":"2.42670514","5":"0.017039566","6":"3.840904","7":"3.528878e-03","8":"0.63807555"},{"1":"20","2":"2.7","3":"26.16506","4":"-6.16506128","5":"0.005805122","6":"3.822693","7":"7.585065e-03","8":"-1.61185046"},{"1":"20","2":"2.7","3":"26.16506","4":"-6.16506128","5":"0.005805122","6":"3.822693","7":"7.585065e-03","8":"-1.61185046"},{"1":"22","2":"2.7","3":"26.16506","4":"-4.16506128","5":"0.005805122","6":"3.834442","7":"3.462002e-03","8":"-1.08895202"},{"1":"17","2":"3.4","3":"23.69365","4":"-6.69364911","5":"0.004286758","6":"3.818859","7":"6.582676e-03","8":"-1.74871450"},{"1":"19","2":"3.4","3":"23.69365","4":"-4.69364911","5":"0.004286758","6":"3.831801","7":"3.236666e-03","8":"-1.22621490"},{"1":"18","2":"4.0","3":"21.57530","4":"-3.57529583","5":"0.004990888","6":"3.837039","7":"2.189596e-03","8":"-0.93437576"},{"1":"20","2":"4.0","3":"21.57530","4":"-1.57529583","5":"0.004990888","6":"3.842874","7":"4.250737e-04","8":"-0.41169131"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"26","2":"2.0","3":"28.63647","4":"-2.63647344","5":"0.009843324","6":"3.840324","7":"2.371357e-03","8":"-0.69070810"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"24","2":"2.8","3":"25.81200","4":"-1.81200239","5":"0.005433937","6":"3.842420","7":"6.128880e-04","8":"-0.47365820"},{"1":"44","2":"1.9","3":"28.98953","4":"15.01046768","5":"0.010625911","6":"3.713842","7":"8.310933e-02","8":"3.93402457"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"26","2":"2.0","3":"28.63647","4":"-2.63647344","5":"0.009843324","6":"3.840324","7":"2.371357e-03","8":"-0.69070810"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"29","2":"2.5","3":"26.87118","4":"2.12882096","5":"0.006701768","6":"3.841709","7":"1.045983e-03","8":"0.55682973"},{"1":"29","2":"2.5","3":"26.87118","4":"2.12882096","5":"0.006701768","6":"3.841709","7":"1.045983e-03","8":"0.55682973"},{"1":"23","2":"2.8","3":"25.81200","4":"-2.81200239","5":"0.005433937","6":"3.839800","7":"1.476029e-03","8":"-0.73505863"},{"1":"24","2":"2.8","3":"25.81200","4":"-1.81200239","5":"0.005433937","6":"3.842420","7":"6.128880e-04","8":"-0.47365820"},{"1":"44","2":"1.9","3":"28.98953","4":"15.01046768","5":"0.010625911","6":"3.713842","7":"8.310933e-02","8":"3.93402457"},{"1":"41","2":"1.9","3":"28.98953","4":"12.01046768","5":"0.010625911","6":"3.761291","7":"5.320852e-02","8":"3.14776834"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"26","2":"2.0","3":"28.63647","4":"-2.63647344","5":"0.009843324","6":"3.840324","7":"2.371357e-03","8":"-0.69070810"},{"1":"28","2":"2.5","3":"26.87118","4":"1.12882096","5":"0.006701768","6":"3.843557","7":"2.941009e-04","8":"0.29526254"},{"1":"29","2":"2.5","3":"26.87118","4":"2.12882096","5":"0.006701768","6":"3.841709","7":"1.045983e-03","8":"0.55682973"},{"1":"29","2":"1.8","3":"29.34259","4":"-0.34259120","5":"0.011459924","6":"3.844212","7":"4.676940e-05","8":"-0.08982602"},{"1":"29","2":"1.8","3":"29.34259","4":"-0.34259120","5":"0.011459924","6":"3.844212","7":"4.676940e-05","8":"-0.08982602"},{"1":"28","2":"2.0","3":"28.63647","4":"-0.63647344","5":"0.009843324","6":"3.844049","7":"1.382009e-04","8":"-0.16674447"},{"1":"29","2":"2.0","3":"28.63647","4":"0.36352656","5":"0.009843324","6":"3.844204","7":"4.508400e-05","8":"0.09523735"},{"1":"26","2":"2.8","3":"25.81200","4":"0.18799761","5":"0.005433937","6":"3.844259","7":"6.597330e-06","8":"0.04914265"},{"1":"26","2":"2.8","3":"25.81200","4":"0.18799761","5":"0.005433937","6":"3.844259","7":"6.597330e-06","8":"0.04914265"},{"1":"26","2":"3.6","3":"22.98753","4":"3.01246865","5":"0.004315767","6":"3.839144","7":"1.342382e-03","8":"0.78701830"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;

]

---

# Linear regression with more complex model 

.pull-left[


```r
slr_cat &lt;- lm(hwy ~ drv*displ, data=mpg) 

slr_cat %&gt;% 
  tidy()
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"30.6831131","3":"1.0960630","4":"27.993933","5":"1.018637e-75"},{"1":"drvf","2":"6.6949631","3":"1.5670461","4":"4.272346","5":"2.841696e-05"},{"1":"drvr","2":"-4.9033952","3":"4.1821302","4":"-1.172464","5":"2.422346e-01"},{"1":"displ","2":"-2.8784863","3":"0.2637577","4":"-10.913372","5":"1.392287e-22"},{"1":"drvf:displ","2":"-0.7243016","3":"0.4979149","4":"-1.454669","5":"1.471361e-01"},{"1":"drvr:displ","2":"1.9550477","3":"0.8147555","4":"2.399552","5":"1.721899e-02"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;

]

.pull-right[


```r
cat_tm &lt;-
  linear_reg() %&gt;% 
  set_engine("lm") %&gt;% 
  fit(hwy ~ drv*displ, data=mpg)

cat_tm %&gt;% 
  tidy()
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"30.6831131","3":"1.0960630","4":"27.993933","5":"1.018637e-75"},{"1":"drvf","2":"6.6949631","3":"1.5670461","4":"4.272346","5":"2.841696e-05"},{"1":"drvr","2":"-4.9033952","3":"4.1821302","4":"-1.172464","5":"2.422346e-01"},{"1":"displ","2":"-2.8784863","3":"0.2637577","4":"-10.913372","5":"1.392287e-22"},{"1":"drvf:displ","2":"-0.7243016","3":"0.4979149","4":"-1.454669","5":"1.471361e-01"},{"1":"drvr:displ","2":"1.9550477","3":"0.8147555","4":"2.399552","5":"1.721899e-02"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;

]
---

# Complex model in tidymodels another way

Could be useful for easing into machine learning.

.pull-left[

```r
rec &lt;- recipe(hwy ~ drv + displ, data = mpg) %&gt;% 
  step_dummy(drv) %&gt;% 
  step_interact(terms = ~ starts_with("drv"):displ)
  
mod &lt;- linear_reg() %&gt;% 
  set_engine("lm") 

workflow() %&gt;% 
  add_recipe(rec) %&gt;% 
  add_model(mod) %&gt;% 
  fit(mpg) %&gt;% # need to specify data
  tidy()
```
]
.pull-right[
&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"30.6831131","3":"1.0960630","4":"27.993933","5":"1.018637e-75"},{"1":"displ","2":"-2.8784863","3":"0.2637577","4":"-10.913372","5":"1.392287e-22"},{"1":"drv_f","2":"6.6949631","3":"1.5670461","4":"4.272346","5":"2.841696e-05"},{"1":"drv_r","2":"-4.9033952","3":"4.1821302","4":"-1.172464","5":"2.422346e-01"},{"1":"drv_f_x_displ","2":"-0.7243016","3":"0.4979149","4":"-1.454669","5":"1.471361e-01"},{"1":"drv_r_x_displ","2":"1.9550477","3":"0.8147555","4":"2.399552","5":"1.721899e-02"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;
]

---

# Inference

When I teach inference, I start with bootstrapping to simulate the sampling distribution of the slope term. I haven't figured out how to do this well with tidymodels yet (just kidding ... with a bit of searching, I found this [blogpost](https://juliasilge.com/blog/superbowl-conf-int/) by Julia Silge). 

.pull-left[


```r
set.seed(155)
samples_200 &lt;- rep_sample_n(mpg, #data we're sampling from
                            size = nrow(mpg), #size of each sample - same size
                            reps = 200, #how many samples to take
                            replace = TRUE #with or without
                                            #replacement?
                            )

samples_200 %&gt;% 
  group_by(replicate) %&gt;% 
  summarize(tidy(lm(hwy ~ displ))) %&gt;% 
  filter(term == "displ") %&gt;% 
  ggplot(aes(x = estimate)) +
  geom_histogram()
```
]
.pull-right[
![](slides_files/figure-html/unnamed-chunk-10-1.png)&lt;!-- --&gt;
]

---

# Machine learning

This is where tidymodels really excels (in my opinion). We can use similar workflows for different types of models. I am going to outline an example that is illustrated in further detail [here](https://advanced-ds-in-r.netlify.app/posts/2021-03-16-ml-review/).

First, we need a few more libraries:


```r
library(glmnet)            # for regularized regression, including LASSO
library(moderndive)        # for King County housing data
library(vip)               # for variable importance plots
```

---

# tidymodels example

King Count house prices dataset from moderndive library.


```r
data("house_prices")

house_prices %&gt;% 
  slice(1:5)
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["date"],"name":[2],"type":["date"],"align":["right"]},{"label":["price"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["bedrooms"],"name":[4],"type":["int"],"align":["right"]},{"label":["bathrooms"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["sqft_living"],"name":[6],"type":["int"],"align":["right"]},{"label":["sqft_lot"],"name":[7],"type":["int"],"align":["right"]},{"label":["floors"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["waterfront"],"name":[9],"type":["lgl"],"align":["right"]},{"label":["view"],"name":[10],"type":["int"],"align":["right"]},{"label":["condition"],"name":[11],"type":["fct"],"align":["left"]},{"label":["grade"],"name":[12],"type":["fct"],"align":["left"]},{"label":["sqft_above"],"name":[13],"type":["int"],"align":["right"]},{"label":["sqft_basement"],"name":[14],"type":["int"],"align":["right"]},{"label":["yr_built"],"name":[15],"type":["int"],"align":["right"]},{"label":["yr_renovated"],"name":[16],"type":["int"],"align":["right"]},{"label":["zipcode"],"name":[17],"type":["fct"],"align":["left"]},{"label":["lat"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["long"],"name":[19],"type":["dbl"],"align":["right"]},{"label":["sqft_living15"],"name":[20],"type":["int"],"align":["right"]},{"label":["sqft_lot15"],"name":[21],"type":["int"],"align":["right"]}],"data":[{"1":"7129300520","2":"2014-10-13","3":"221900","4":"3","5":"1.00","6":"1180","7":"5650","8":"1","9":"FALSE","10":"0","11":"3","12":"7","13":"1180","14":"0","15":"1955","16":"0","17":"98178","18":"47.5112","19":"-122.257","20":"1340","21":"5650"},{"1":"6414100192","2":"2014-12-09","3":"538000","4":"3","5":"2.25","6":"2570","7":"7242","8":"2","9":"FALSE","10":"0","11":"3","12":"7","13":"2170","14":"400","15":"1951","16":"1991","17":"98125","18":"47.7210","19":"-122.319","20":"1690","21":"7639"},{"1":"5631500400","2":"2015-02-25","3":"180000","4":"2","5":"1.00","6":"770","7":"10000","8":"1","9":"FALSE","10":"0","11":"3","12":"6","13":"770","14":"0","15":"1933","16":"0","17":"98028","18":"47.7379","19":"-122.233","20":"2720","21":"8062"},{"1":"2487200875","2":"2014-12-09","3":"604000","4":"4","5":"3.00","6":"1960","7":"5000","8":"1","9":"FALSE","10":"0","11":"5","12":"7","13":"1050","14":"910","15":"1965","16":"0","17":"98136","18":"47.5208","19":"-122.393","20":"1360","21":"5000"},{"1":"1954400510","2":"2015-02-18","3":"510000","4":"3","5":"2.00","6":"1680","7":"8080","8":"1","9":"FALSE","10":"0","11":"3","12":"8","13":"1680","14":"0","15":"1987","16":"0","17":"98074","18":"47.6168","19":"-122.045","20":"1800","21":"7503"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;


---

# tidymodels example - data splitting

Log transform the response variable price. Split the training and testing data.


```r
set.seed(327) #for reproducibility

house_prices &lt;- house_prices %&gt;% 
  mutate(log_price = log(price, base = 10)) %&gt;% 
  select(-price)

# Randomly assigns 75% of the data to training.
house_split &lt;- initial_split(house_prices, 
                             prop = .75)
house_training &lt;- training(house_split)
house_testing &lt;- testing(house_split)
```


---


# tidymodels example - recipe

Do all the pre-processing


```r
house_recipe &lt;- recipe(log_price ~ ., #short-cut, . = all other vars
                       data = house_training) %&gt;% 
  step_rm(sqft_living15, sqft_lot15) %&gt;%
  step_log(starts_with("sqft"),
           -sqft_basement, 
           base = 10) %&gt;% 
  step_mutate(grade = as.character(grade),
              grade = fct_relevel(
                        case_when(
                          grade %in% "1":"6"   ~ "below_average",
                          grade %in% "10":"13" ~ "high",
                          TRUE ~ grade
                        ),
                        "below_average","7","8","9","high"),
              basement = as.numeric(sqft_basement == 0),
              renovated = as.numeric(yr_renovated == 0),
              view = as.numeric(view == 0),
              waterfront = as.numeric(waterfront),
              age_at_sale = year(date) - yr_built)%&gt;% 
  step_rm(sqft_basement, 
          yr_renovated, 
          yr_built) %&gt;% 
  step_date(date, 
            features = "month") %&gt;% 
  update_role(all_of(c("id",
                       "date",
                       "zipcode", 
                       "lat", 
                       "long")),
              new_role = "evaluative") %&gt;% 
  step_dummy(all_nominal(), 
             -all_outcomes(), 
             -has_role(match = "evaluative")) %&gt;% 
  step_normalize(all_predictors(), 
                 -all_nominal())
```


---

# tidymodels example - cv split of training

We'll use this later when we tune a parameter in the model.


```r
set.seed(1211) # for reproducibility
house_cv &lt;- vfold_cv(house_training, v = 5)
```


---

# tidymodels example - set up model and workflow



```r
house_lasso_mod &lt;- 
  # Define a lasso model 
  # I believe default is mixture = 1 so probably don't need 
  linear_reg(mixture = 1) %&gt;% 
  # Set the engine to "glmnet" 
  set_engine("glmnet") %&gt;% 
  # The parameters we will tune.
  set_args(penalty = tune()) %&gt;% 
  # Use "regression"
  set_mode("regression")

house_lasso_wf &lt;- 
  # Set up the workflow
  workflow() %&gt;% 
  # Add the recipe
  add_recipe(house_recipe) %&gt;% 
  # Add the modeling
  add_model(house_lasso_mod)
```

---

# tidymodels example - evaluate tuning parameters

Make a tuning grid (use default), fit the model using cross-validation for all `penalty_grid` values and evaluate on all the folds.


```r
penalty_grid &lt;- grid_regular(penalty(),
                             levels = 20)
house_lasso_tune &lt;- 
  house_lasso_wf %&gt;% 
  tune_grid(
    resamples = house_cv,
    grid = penalty_grid
    )

# rmse averaged over all folds:
house_lasso_tune %&gt;% 
  collect_metrics() %&gt;% 
  filter(.metric == "rmse")
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["penalty"],"name":[1],"type":["dbl"],"align":["right"]},{"label":[".metric"],"name":[2],"type":["chr"],"align":["left"]},{"label":[".estimator"],"name":[3],"type":["chr"],"align":["left"]},{"label":["mean"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["n"],"name":[5],"type":["int"],"align":["right"]},{"label":["std_err"],"name":[6],"type":["dbl"],"align":["right"]},{"label":[".config"],"name":[7],"type":["chr"],"align":["left"]}],"data":[{"1":"1.000000e-10","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model01"},{"1":"3.359818e-10","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model02"},{"1":"1.128838e-09","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model03"},{"1":"3.792690e-09","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model04"},{"1":"1.274275e-08","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model05"},{"1":"4.281332e-08","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model06"},{"1":"1.438450e-07","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model07"},{"1":"4.832930e-07","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model08"},{"1":"1.623777e-06","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model09"},{"1":"5.455595e-06","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model10"},{"1":"1.832981e-05","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model11"},{"1":"6.158482e-05","2":"rmse","3":"standard","4":"0.1351899","5":"5","6":"0.0010399811","7":"Preprocessor1_Model12"},{"1":"2.069138e-04","2":"rmse","3":"standard","4":"0.1351942","5":"5","6":"0.0010302484","7":"Preprocessor1_Model13"},{"1":"6.951928e-04","2":"rmse","3":"standard","4":"0.1352838","5":"5","6":"0.0009874838","7":"Preprocessor1_Model14"},{"1":"2.335721e-03","2":"rmse","3":"standard","4":"0.1362545","5":"5","6":"0.0008567141","7":"Preprocessor1_Model15"},{"1":"7.847600e-03","2":"rmse","3":"standard","4":"0.1419263","5":"5","6":"0.0006800315","7":"Preprocessor1_Model16"},{"1":"2.636651e-02","2":"rmse","3":"standard","4":"0.1608328","5":"5","6":"0.0006508049","7":"Preprocessor1_Model17"},{"1":"8.858668e-02","2":"rmse","3":"standard","4":"0.1904777","5":"5","6":"0.0010571445","7":"Preprocessor1_Model18"},{"1":"2.976351e-01","2":"rmse","3":"standard","4":"0.2281171","5":"5","6":"0.0013380619","7":"Preprocessor1_Model19"},{"1":"1.000000e+00","2":"rmse","3":"standard","4":"0.2281171","5":"5","6":"0.0013380619","7":"Preprocessor1_Model20"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;

---

# tidymodels example - fit final model

We choose the best penalty parameter as the one with the smallest cross-validated RMSE. We then use that parameter to fit the model to the training data.


```r
best_param &lt;- house_lasso_tune %&gt;% 
  select_best(metric = "rmse")

house_lasso_final_wf &lt;- house_lasso_wf %&gt;% 
  finalize_workflow(best_param)

house_lasso_final_mod &lt;- house_lasso_final_wf %&gt;% 
  fit(data = house_training)

house_lasso_final_mod %&gt;% 
  pull_workflow_fit() %&gt;% 
  tidy() 
```

&lt;div data-pagedtable="false"&gt;
  &lt;script data-pagedtable-source type="application/json"&gt;
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["penalty"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"5.6663352231","3":"1e-10"},{"1":"bedrooms","2":"-0.0148932539","3":"1e-10"},{"1":"bathrooms","2":"0.0254688004","3":"1e-10"},{"1":"sqft_living","2":"0.0543008504","3":"1e-10"},{"1":"sqft_lot","2":"-0.0142399935","3":"1e-10"},{"1":"floors","2":"0.0127127626","3":"1e-10"},{"1":"waterfront","2":"0.0165484795","3":"1e-10"},{"1":"view","2":"-0.0172385217","3":"1e-10"},{"1":"sqft_above","2":"0.0249500520","3":"1e-10"},{"1":"basement","2":"-0.0195417525","3":"1e-10"},{"1":"renovated","2":"-0.0010884653","3":"1e-10"},{"1":"age_at_sale","2":"0.0702701417","3":"1e-10"},{"1":"condition_X2","2":"-0.0054381165","3":"1e-10"},{"1":"condition_X3","2":"-0.0037813235","3":"1e-10"},{"1":"condition_X4","2":"0.0006717627","3":"1e-10"},{"1":"condition_X5","2":"0.0075342144","3":"1e-10"},{"1":"grade_X7","2":"0.0498830918","3":"1e-10"},{"1":"grade_X8","2":"0.0884274449","3":"1e-10"},{"1":"grade_X9","2":"0.1004870896","3":"1e-10"},{"1":"grade_high","2":"0.1126768186","3":"1e-10"},{"1":"date_month_Feb","2":"0.0006727003","3":"1e-10"},{"1":"date_month_Mar","2":"0.0057104319","3":"1e-10"},{"1":"date_month_Apr","2":"0.0095341586","3":"1e-10"},{"1":"date_month_May","2":"0.0042811976","3":"1e-10"},{"1":"date_month_Jun","2":"0.0021332819","3":"1e-10"},{"1":"date_month_Jul","2":"0.0018230191","3":"1e-10"},{"1":"date_month_Aug","2":"0.0017206692","3":"1e-10"},{"1":"date_month_Sep","2":"0.0010320801","3":"1e-10"},{"1":"date_month_Oct","2":"0.0000109893","3":"1e-10"},{"1":"date_month_Nov","2":"0.0000000000","3":"1e-10"},{"1":"date_month_Dec","2":"-0.0012238860","3":"1e-10"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  &lt;/script&gt;
&lt;/div&gt;


---


# Open discussion



    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
